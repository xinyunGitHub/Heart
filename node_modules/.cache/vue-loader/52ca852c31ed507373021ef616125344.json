{"remainingRequest":"/Users/wind/Documents/Heart/Heart/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wind/Documents/Heart/Heart/src/views/Detail.vue?vue&type=style&index=0&id=40f4caea&lang=less&scoped=true&","dependencies":[{"path":"/Users/wind/Documents/Heart/Heart/src/views/Detail.vue","mtime":1604374780584},{"path":"/Users/wind/Documents/Heart/Heart/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wind/Documents/Heart/Heart/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/wind/Documents/Heart/Heart/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/wind/Documents/Heart/Heart/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wind/Documents/Heart/Heart/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wind/Documents/Heart/Heart/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5kZXRhaWwgewogIHBvc2l0aW9uOiByZWxhdGl2ZTsKICB3aWR0aDogMTAwJTsKICBtaW4taGVpZ2h0OiAxMDB2aDsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjVmNWY1OwogIC5kZXRhaWwtc3dpcGUgewogICAgd2lkdGg6IDEwMCU7CiAgICBoZWlnaHQ6IDM3NXB4OwogICAgLnZhbi1zd2lwZS1pdGVtIHsKICAgICAgd2lkdGg6IDEwMCU7CiAgICAgIGhlaWdodDogMzc1cHg7CiAgICAgID4gaW1nIHsKICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICBoZWlnaHQ6IDM3NXB4OwogICAgICB9CiAgICB9CiAgfQogIC5kZXRhaWwtcHJpY2UgewogICAgZm9udC1zaXplOiAxOHB4OwogICAgY29sb3I6ICNlZTBhMjQ7CiAgfQogIC5kZXRhaWwtdGl0bGUgewogICAgZm9udC1zaXplOiAxNnB4OwogICAgY29sb3I6ICMzMzMzMzM7CiAgfQogIC5kZXRhaWwtcXVhbGl0eSB7CiAgICBtYXJnaW46IDE4cHggMCAwIDA7CiAgfQogIC5kZXRhaWwtbWVzc2FnZSB7CiAgICBtYXJnaW46IDE4cHggMCAwIDA7CiAgICBwYWRkaW5nOiAwIDAgNTBweCAwOwogICAgPiBpbWcgewogICAgICB3aWR0aDogMTAwJTsKICAgICAgaGVpZ2h0OiBhdXRvOwogICAgfQogIH0KfQo="},{"version":3,"sources":["Detail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Detail.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"detail\">\n    <!--【banner图】-->\n    <van-swipe class=\"detail-swipe\" :autoplay=\"3000\" indicator-color=\"white\">\n      <van-swipe-item v-for=\"(item, index) in figureData\" :key=\"index\">\n        <img v-lazy=\"baseUrl + 'storage/' + item.figure\" />\n      </van-swipe-item>\n    </van-swipe>\n    <!--【商品标题和价格】-->\n    <van-cell-group>\n      <van-cell :value=\"'零售价: ¥' + informData.price\" :border=\"false\" value-class=\"detail-price\" />\n      <van-cell :value=\"informData.title\" :border=\"false\" value-class=\"detail-title\" />\n    </van-cell-group>\n    <van-cell-group class=\"detail-quality\">\n      <van-cell title=\"运费: 包邮\" />\n      <van-cell title=\"正品保障\" />\n    </van-cell-group>\n    <!--【商品详情】-->\n    <van-cell-group class=\"detail-message\">\n      <van-cell title=\"商品详情\" :border=\"false\" />\n      <template v-for=\"(item, index) in thumbData\">\n        <img :key=\"index\" v-lazy=\"baseUrl + 'storage/' + item.describe\" />\n      </template>\n      <van-divider>没有更多啦</van-divider>\n    </van-cell-group>\n    <!--【Sku】-->\n    <van-sku\n      v-model=\"skuDialog\"\n      :sku=\"sku\"\n      :goods=\"informData\"\n      :goods-id=\"informData.unique\"\n      :quota=\"0\"\n      :quota-used=\"0\"\n      :hide-stock=\"false\"\n      @buy-clicked=\"goBuy\"\n    />\n    <!--【底部固定栏】-->\n    <van-goods-action>\n      <van-goods-action-icon icon=\"chat-o\" text=\"客服\" @click=\"getCustom\" />\n      <van-goods-action-icon icon=\"shop-o\" text=\"店铺\" @click=\"routeHome\" />\n      <van-goods-action-button\n        type=\"danger\"\n        text=\"立即购买\"\n        @click=\"prepareBuy\"\n      />\n    </van-goods-action>\n  </div>\n</template>\n\n<script>\nimport Vue from 'vue';\nimport { Swipe, SwipeItem, Lazyload, Cell, CellGroup, Divider, GoodsAction, GoodsActionIcon, GoodsActionButton, Sku } from 'vant';\nVue.use(Swipe);\nVue.use(SwipeItem);\nVue.use(Lazyload);\nVue.use(Cell);\nVue.use(CellGroup);\nVue.use(Divider);\nVue.use(Sku);\nVue.use(GoodsAction);\nVue.use(GoodsActionButton);\nVue.use(GoodsActionIcon);\nimport { goodsDetail, goodsSku } from './../assets/api/detail.js'\nexport default {\n  name: 'Detail',\n  data() {\n    return {\n      baseUrl: process.env.VUE_APP_SERVICE,\n      figureData: [],\n      informData: {},\n      thumbData: [],\n      skuDialog: false,\n      sku: {\n        tree: [],\n        list: [\n          {\n            id: 2259, // skuId\n            3: 3, // 规格类目 k_s 为 s1 的对应规格值 id\n            4: 6, // 规格类目 k_s 为 s2 的对应规格值 id\n            price: 100, // 价格（单位分）\n            stock_num: 110 // 当前 sku 组合对应的库存\n          }\n        ],\n        price: '1.00', // 默认价格（单位元）\n        stock_num: 100, // 商品总库存\n        collection_id: 2261, // 无规格商品 skuId 取 collection_id，否则取所选 sku 组合对应的 id\n        none_sku: false, // 是否无规格商品\n      }\n    }\n  },\n  created() {\n    const unique = this.$route.query.unique;\n    this.detailData(unique);\n    this.detailSku(unique);\n  },\n  methods: {\n    async detailData(unique) {\n      let params = {\n        unique: unique\n      };\n      let result = await goodsDetail(params);\n      if (result.status) {\n        this.figureData = result.data.figure;\n        this.informData = result.data.inform;\n        this.thumbData = result.data.thumb;\n        // 初始化sku数据\n        this.sku.price = this.informData.price;\n      }\n    },\n    async detailSku(unique) {\n      let params = {\n        unique: unique\n      };\n      let result = await goodsSku(params);\n      if (result.status) {\n        this.sku.tree = result.data;\n        this.sku.list = this.skuList(result.data);\n        console.log( this.sku.list, 'OOOO');\n      }\n    },\n    skuList(tree) {\n      let group = [];\n      tree.map(item => {\n        let single = [];\n        item.v.map(list => {\n          single.push(list.name);\n        })\n        group.push(single);\n      })\n      return this.Cartesian(group);\n    },\n    Cartesian(arr) { // 求笛卡尔值\n      if (arr.length < 2) return arr[0] || [];\n      return arr.reduce((total, value) => {\n        let item = [];\n        total.forEach(c => {\n          value.forEach(v => {\n            if (c instanceof Array) {\n              item.push([...c, v]);\n            } else {\n              item.push([c, v]);\n            }\n          })\n        })\n        return item;\n      })\n    },\n    getCustom() {\n      console.log('咨询客服')\n    },\n    routeHome() {\n      this.$router.push({\n        name: 'Home'\n      })\n    },\n    prepareBuy() {\n      this.skuDialog = true;\n    },\n    goBuy() {\n      console.log('gobuy')\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.detail {\n  position: relative;\n  width: 100%;\n  min-height: 100vh;\n  background-color: #f5f5f5;\n  .detail-swipe {\n    width: 100%;\n    height: 375px;\n    .van-swipe-item {\n      width: 100%;\n      height: 375px;\n      > img {\n        width: 100%;\n        height: 375px;\n      }\n    }\n  }\n  .detail-price {\n    font-size: 18px;\n    color: #ee0a24;\n  }\n  .detail-title {\n    font-size: 16px;\n    color: #333333;\n  }\n  .detail-quality {\n    margin: 18px 0 0 0;\n  }\n  .detail-message {\n    margin: 18px 0 0 0;\n    padding: 0 0 50px 0;\n    > img {\n      width: 100%;\n      height: auto;\n    }\n  }\n}\n</style>"]}]}