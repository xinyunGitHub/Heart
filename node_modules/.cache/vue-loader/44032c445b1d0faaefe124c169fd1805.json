{"remainingRequest":"/Users/wind/Documents/Heart/Heart/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wind/Documents/Heart/Heart/src/views/Address.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wind/Documents/Heart/Heart/src/views/Address.vue","mtime":1604458962873},{"path":"/Users/wind/Documents/Heart/Heart/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wind/Documents/Heart/Heart/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/wind/Documents/Heart/Heart/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wind/Documents/Heart/Heart/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IHsgQWRkcmVzc0xpc3QsIEVtcHR5LCBUb2FzdCB9IGZyb20gJ3ZhbnQnOwpWdWUudXNlKEFkZHJlc3NMaXN0KTsKVnVlLnVzZShFbXB0eSk7CmltcG9ydCB7IGxpc3RBZGRyZXNzLCB1cGRhdGVBZGRyZXNzIH0gZnJvbSAnLi8uLi9hc3NldHMvYXBpL2FkZHJlc3MuanMnCmltcG9ydCB7IGdldEl0ZW0gfSBmcm9tICcuLy4uL2Fzc2V0cy9qcy9hcHB1dGlscy5qcycKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdBZGRyZXNzJywKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYWRkcmVzc0FjdGl2ZTogJycKICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmxpc3REYXRhKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBhc3luYyBsaXN0RGF0YSgpIHsKICAgICAgbGV0IHBhcmFtcyA9IHsKICAgICAgICBvcGVuaWQ6IGdldEl0ZW0oJ3VzZXJJbmZvJykub3BlbmlkLAogICAgICB9OwogICAgICBsZXQgcmVzdWx0ID0gYXdhaXQgbGlzdEFkZHJlc3MocGFyYW1zKTsKICAgICAgaWYgKHJlc3VsdC5zdGF0dXMpIHsKICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoInNldEFkZHJlc3NMaXN0IiwgcmVzdWx0LmRhdGEpOwogICAgICAgIHJlc3VsdC5kYXRhLmZpbHRlcihpdGVtID0+IHsKICAgICAgICAgIGlmIChpdGVtLmlzRGVmYXVsdCkgewogICAgICAgICAgICB0aGlzLmFkZHJlc3NBY3RpdmUgPSBpdGVtLmlkOwogICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoInNldEFkZHJlc3NBY3RpdmUiLCBpdGVtLmlkKTsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICB9IGVsc2UgewogICAgICAgIFRvYXN0LmZhaWwocmVzdWx0Lm1lc3NhZ2UpOwogICAgICB9CiAgICB9LAogICAgYXN5bmMgb25TZWxlY3QoaXRlbSkgewogICAgICBpZiAoaXRlbS5pZCA9PSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldEFkZHJlc3NBY3RpdmUpIHsKICAgICAgICB0aGlzLiRyb3V0ZXIuZ28oLTEpOwogICAgICB9IGVsc2UgewogICAgICAgIGxldCBwYXJhbXMgPSB7CiAgICAgICAgICBvcGVuaWQ6IGdldEl0ZW0oJ3VzZXJJbmZvJykub3BlbmlkLAogICAgICAgICAgaWQ6IGl0ZW0uaWQKICAgICAgICB9OwogICAgICAgIGxldCByZXN1bHQgPSBhd2FpdCB1cGRhdGVBZGRyZXNzKHBhcmFtcyk7CiAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMpIHsKICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgic2V0QWRkcmVzc0FjdGl2ZSIsIGl0ZW0uaWQpOwogICAgICAgICAgVG9hc3Quc3VjY2VzcyhyZXN1bHQubWVzc2FnZSk7CiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgdGhpcy4kcm91dGVyLmdvKC0xKTsKICAgICAgICAgIH0sIDYwMCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIFRvYXN0LmZhaWwocmVzdWx0Lm1lc3NhZ2UpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIG9uQWRkKCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgbmFtZTogJ0ZvdW5kJwogICAgICB9KTsKICAgIH0sCiAgICBvbkVkaXQoaXRlbSkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgbmFtZTogJ0ZvdW5kJywKICAgICAgICBxdWVyeTogewogICAgICAgICAgaWQ6IGl0ZW0uaWQKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0KfQo="},{"version":3,"sources":["Address.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Address.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"address\">\n    <van-address-list\n      v-model=\"addressActive\"\n      :list=\"$store.getters.getAddressList\"\n      @select=\"onSelect\"\n      @add=\"onAdd\"\n      @edit=\"onEdit\"\n    />\n    <template v-if=\"$store.getters.getAddressList.length == 0\">\n      <van-empty description=\"暂无收获地址～\" />\n    </template>\n  </div>\n</template>\n\n<script>\nimport Vue from 'vue';\nimport { AddressList, Empty, Toast } from 'vant';\nVue.use(AddressList);\nVue.use(Empty);\nimport { listAddress, updateAddress } from './../assets/api/address.js'\nimport { getItem } from './../assets/js/apputils.js'\nexport default {\n  name: 'Address',\n  data() {\n    return {\n      addressActive: ''\n    }\n  },\n  created() {\n    this.listData();\n  },\n  methods: {\n    async listData() {\n      let params = {\n        openid: getItem('userInfo').openid,\n      };\n      let result = await listAddress(params);\n      if (result.status) {\n        this.$store.commit(\"setAddressList\", result.data);\n        result.data.filter(item => {\n          if (item.isDefault) {\n            this.addressActive = item.id;\n            this.$store.commit(\"setAddressActive\", item.id);\n          }\n        })\n      } else {\n        Toast.fail(result.message);\n      }\n    },\n    async onSelect(item) {\n      if (item.id == this.$store.getters.getAddressActive) {\n        this.$router.go(-1);\n      } else {\n        let params = {\n          openid: getItem('userInfo').openid,\n          id: item.id\n        };\n        let result = await updateAddress(params);\n        if (result.status) {\n          this.$store.commit(\"setAddressActive\", item.id);\n          Toast.success(result.message);\n          setTimeout(() => {\n            this.$router.go(-1);\n          }, 600);\n        } else {\n          Toast.fail(result.message);\n        }\n      }\n    },\n    onAdd() {\n      this.$router.push({\n        name: 'Found'\n      });\n    },\n    onEdit(item) {\n      this.$router.push({\n        name: 'Found',\n        query: {\n          id: item.id\n        }\n      });\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.address {\n  position: relative;\n  width: 100%;\n  min-height: 100vh;\n  background-color: #f5f5f5;\n}\n</style>"]}]}