{"remainingRequest":"/Users/wind/Documents/Heart/Heart/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wind/Documents/Heart/Heart/src/views/Found.vue?vue&type=style&index=0&id=5ff3ccb8&lang=less&scoped=true&","dependencies":[{"path":"/Users/wind/Documents/Heart/Heart/src/views/Found.vue","mtime":1604453875729},{"path":"/Users/wind/Documents/Heart/Heart/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wind/Documents/Heart/Heart/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/wind/Documents/Heart/Heart/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/wind/Documents/Heart/Heart/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wind/Documents/Heart/Heart/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wind/Documents/Heart/Heart/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5mb3VuZCB7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIHdpZHRoOiAxMDAlOwogIG1pbi1oZWlnaHQ6IDEwMHZoOwogIGJhY2tncm91bmQtY29sb3I6ICNmNWY1ZjU7Cn0K"},{"version":3,"sources":["Found.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoGA;AACA;AACA;AACA;AACA;AACA","file":"Found.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div class=\"found\">\n      <van-address-edit\n        :area-list=\"areaList\"\n        :show-postal=\"false\"\n        :address-info=\"addressInfo\"\n        :show-delete=\"addressId != -1\"\n        :area-columns-placeholder=\"['请选择', '请选择', '请选择']\"\n        @save=\"onSave\"\n        @delete=\"onDelete\"\n      />\n    </div>\n</template>\n\n<script>\nimport Vue from 'vue';\nimport { AddressEdit, Toast  } from 'vant';\nVue.use(AddressEdit);\nVue.use(Toast);\nimport areaList from './../assets/js/area.js';\nimport { addAddress, editAddress, delAddress } from './../assets/api/found.js'\nimport { getItem } from './../assets/js/apputils.js'\nexport default {\n  name: 'Found',\n  data() {\n    return {\n      addressId: -1,\n      areaList: areaList,\n      addressInfo: {}\n    }\n  },\n  created() {\n    this.addressId = this.$route.query.id || -1;\n    if (this.addressId != -1) {\n      // 初始化编辑数据\n      let addressList = this.$store.getters.getAddressList;\n      let addressData = addressList.filter(item => item.id == this.addressId);\n      addressData[0].addressDetail = addressData[0].road;\n      this.addressInfo = addressData[0];\n    }\n  },\n  methods: {\n    async onSave(val) {\n      if (this.addressId != -1) { // 编辑\n        let params = {\n          openid: getItem('userInfo').openid,\n          id: this.addressId,\n          name: val.name,\n          phone: val.tel,\n          province: val.province,\n          city: val.city,\n          county: val.county,\n          road: val.addressDetail\n        };\n        let result = await editAddress(params);\n        if (result.status) {\n          this.$router.go(-1);\n          Toast.success(result.message);\n        } else {\n          Toast.fail(result.message);\n        }\n      } else { // 新增地址\n        let params = {\n          openid: getItem('userInfo').openid,\n          name: val.name,\n          phone: val.tel,\n          province: val.province,\n          city: val.city,\n          county: val.county,\n          road: val.addressDetail\n        };\n        let result = await addAddress(params);\n        if (result.status) {\n          this.$router.go(-1);\n          Toast.success(result.message);\n        } else {\n          Toast.fail(result.message);\n        }\n      }\n    },\n    async onDelete() {\n      if (this.addressId != -1) {\n        let params = {\n          openid: getItem('userInfo').openid,\n          id: this.addressId,\n        };\n        let result = await delAddress(params);\n        if (result.status) {\n          this.$router.go(-1);\n          Toast.success(result.message);\n        } else {\n          Toast.fail(result.message);\n        }\n      }\n    },\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.found {\n  position: relative;\n  width: 100%;\n  min-height: 100vh;\n  background-color: #f5f5f5;\n}\n</style>"]}]}