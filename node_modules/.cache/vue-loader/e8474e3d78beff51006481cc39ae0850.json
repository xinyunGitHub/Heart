{"remainingRequest":"/Users/wind/Documents/Heart/Heart/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wind/Documents/Heart/Heart/src/views/Address.vue?vue&type=style&index=0&id=3be7d8aa&lang=less&scoped=true&","dependencies":[{"path":"/Users/wind/Documents/Heart/Heart/src/views/Address.vue","mtime":1604458962873},{"path":"/Users/wind/Documents/Heart/Heart/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wind/Documents/Heart/Heart/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/wind/Documents/Heart/Heart/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/wind/Documents/Heart/Heart/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wind/Documents/Heart/Heart/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wind/Documents/Heart/Heart/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5hZGRyZXNzIHsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgd2lkdGg6IDEwMCU7CiAgbWluLWhlaWdodDogMTAwdmg7CiAgYmFja2dyb3VuZC1jb2xvcjogI2Y1ZjVmNTsKfQo="},{"version":3,"sources":["Address.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwFA;AACA;AACA;AACA;AACA;AACA","file":"Address.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"address\">\n    <van-address-list\n      v-model=\"addressActive\"\n      :list=\"$store.getters.getAddressList\"\n      @select=\"onSelect\"\n      @add=\"onAdd\"\n      @edit=\"onEdit\"\n    />\n    <template v-if=\"$store.getters.getAddressList.length == 0\">\n      <van-empty description=\"暂无收获地址～\" />\n    </template>\n  </div>\n</template>\n\n<script>\nimport Vue from 'vue';\nimport { AddressList, Empty, Toast } from 'vant';\nVue.use(AddressList);\nVue.use(Empty);\nimport { listAddress, updateAddress } from './../assets/api/address.js'\nimport { getItem } from './../assets/js/apputils.js'\nexport default {\n  name: 'Address',\n  data() {\n    return {\n      addressActive: ''\n    }\n  },\n  created() {\n    this.listData();\n  },\n  methods: {\n    async listData() {\n      let params = {\n        openid: getItem('userInfo').openid,\n      };\n      let result = await listAddress(params);\n      if (result.status) {\n        this.$store.commit(\"setAddressList\", result.data);\n        result.data.filter(item => {\n          if (item.isDefault) {\n            this.addressActive = item.id;\n            this.$store.commit(\"setAddressActive\", item.id);\n          }\n        })\n      } else {\n        Toast.fail(result.message);\n      }\n    },\n    async onSelect(item) {\n      if (item.id == this.$store.getters.getAddressActive) {\n        this.$router.go(-1);\n      } else {\n        let params = {\n          openid: getItem('userInfo').openid,\n          id: item.id\n        };\n        let result = await updateAddress(params);\n        if (result.status) {\n          this.$store.commit(\"setAddressActive\", item.id);\n          Toast.success(result.message);\n          setTimeout(() => {\n            this.$router.go(-1);\n          }, 600);\n        } else {\n          Toast.fail(result.message);\n        }\n      }\n    },\n    onAdd() {\n      this.$router.push({\n        name: 'Found'\n      });\n    },\n    onEdit(item) {\n      this.$router.push({\n        name: 'Found',\n        query: {\n          id: item.id\n        }\n      });\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.address {\n  position: relative;\n  width: 100%;\n  min-height: 100vh;\n  background-color: #f5f5f5;\n}\n</style>"]}]}