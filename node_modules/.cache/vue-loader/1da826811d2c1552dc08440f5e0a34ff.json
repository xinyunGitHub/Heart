{"remainingRequest":"/Users/wind/Documents/Heart/Heart/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wind/Documents/Heart/Heart/src/views/Detail.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wind/Documents/Heart/Heart/src/views/Detail.vue","mtime":1604374780584},{"path":"/Users/wind/Documents/Heart/Heart/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wind/Documents/Heart/Heart/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/wind/Documents/Heart/Heart/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wind/Documents/Heart/Heart/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IHsgU3dpcGUsIFN3aXBlSXRlbSwgTGF6eWxvYWQsIENlbGwsIENlbGxHcm91cCwgRGl2aWRlciwgR29vZHNBY3Rpb24sIEdvb2RzQWN0aW9uSWNvbiwgR29vZHNBY3Rpb25CdXR0b24sIFNrdSB9IGZyb20gJ3ZhbnQnOwpWdWUudXNlKFN3aXBlKTsKVnVlLnVzZShTd2lwZUl0ZW0pOwpWdWUudXNlKExhenlsb2FkKTsKVnVlLnVzZShDZWxsKTsKVnVlLnVzZShDZWxsR3JvdXApOwpWdWUudXNlKERpdmlkZXIpOwpWdWUudXNlKFNrdSk7ClZ1ZS51c2UoR29vZHNBY3Rpb24pOwpWdWUudXNlKEdvb2RzQWN0aW9uQnV0dG9uKTsKVnVlLnVzZShHb29kc0FjdGlvbkljb24pOwppbXBvcnQgeyBnb29kc0RldGFpbCwgZ29vZHNTa3UgfSBmcm9tICcuLy4uL2Fzc2V0cy9hcGkvZGV0YWlsLmpzJwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0RldGFpbCcsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGJhc2VVcmw6IHByb2Nlc3MuZW52LlZVRV9BUFBfU0VSVklDRSwKICAgICAgZmlndXJlRGF0YTogW10sCiAgICAgIGluZm9ybURhdGE6IHt9LAogICAgICB0aHVtYkRhdGE6IFtdLAogICAgICBza3VEaWFsb2c6IGZhbHNlLAogICAgICBza3U6IHsKICAgICAgICB0cmVlOiBbXSwKICAgICAgICBsaXN0OiBbCiAgICAgICAgICB7CiAgICAgICAgICAgIGlkOiAyMjU5LCAvLyBza3VJZAogICAgICAgICAgICAzOiAzLCAvLyDop4TmoLznsbvnm64ga19zIOS4uiBzMSDnmoTlr7nlupTop4TmoLzlgLwgaWQKICAgICAgICAgICAgNDogNiwgLy8g6KeE5qC857G755uuIGtfcyDkuLogczIg55qE5a+55bqU6KeE5qC85YC8IGlkCiAgICAgICAgICAgIHByaWNlOiAxMDAsIC8vIOS7t+agvO+8iOWNleS9jeWIhu+8iQogICAgICAgICAgICBzdG9ja19udW06IDExMCAvLyDlvZPliY0gc2t1IOe7hOWQiOWvueW6lOeahOW6k+WtmAogICAgICAgICAgfQogICAgICAgIF0sCiAgICAgICAgcHJpY2U6ICcxLjAwJywgLy8g6buY6K6k5Lu35qC877yI5Y2V5L2N5YWD77yJCiAgICAgICAgc3RvY2tfbnVtOiAxMDAsIC8vIOWVhuWTgeaAu+W6k+WtmAogICAgICAgIGNvbGxlY3Rpb25faWQ6IDIyNjEsIC8vIOaXoOinhOagvOWVhuWTgSBza3VJZCDlj5YgY29sbGVjdGlvbl9pZO+8jOWQpuWImeWPluaJgOmAiSBza3Ug57uE5ZCI5a+55bqU55qEIGlkCiAgICAgICAgbm9uZV9za3U6IGZhbHNlLCAvLyDmmK/lkKbml6Dop4TmoLzllYblk4EKICAgICAgfQogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIGNvbnN0IHVuaXF1ZSA9IHRoaXMuJHJvdXRlLnF1ZXJ5LnVuaXF1ZTsKICAgIHRoaXMuZGV0YWlsRGF0YSh1bmlxdWUpOwogICAgdGhpcy5kZXRhaWxTa3UodW5pcXVlKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIGRldGFpbERhdGEodW5pcXVlKSB7CiAgICAgIGxldCBwYXJhbXMgPSB7CiAgICAgICAgdW5pcXVlOiB1bmlxdWUKICAgICAgfTsKICAgICAgbGV0IHJlc3VsdCA9IGF3YWl0IGdvb2RzRGV0YWlsKHBhcmFtcyk7CiAgICAgIGlmIChyZXN1bHQuc3RhdHVzKSB7CiAgICAgICAgdGhpcy5maWd1cmVEYXRhID0gcmVzdWx0LmRhdGEuZmlndXJlOwogICAgICAgIHRoaXMuaW5mb3JtRGF0YSA9IHJlc3VsdC5kYXRhLmluZm9ybTsKICAgICAgICB0aGlzLnRodW1iRGF0YSA9IHJlc3VsdC5kYXRhLnRodW1iOwogICAgICAgIC8vIOWIneWni+WMlnNrdeaVsOaNrgogICAgICAgIHRoaXMuc2t1LnByaWNlID0gdGhpcy5pbmZvcm1EYXRhLnByaWNlOwogICAgICB9CiAgICB9LAogICAgYXN5bmMgZGV0YWlsU2t1KHVuaXF1ZSkgewogICAgICBsZXQgcGFyYW1zID0gewogICAgICAgIHVuaXF1ZTogdW5pcXVlCiAgICAgIH07CiAgICAgIGxldCByZXN1bHQgPSBhd2FpdCBnb29kc1NrdShwYXJhbXMpOwogICAgICBpZiAocmVzdWx0LnN0YXR1cykgewogICAgICAgIHRoaXMuc2t1LnRyZWUgPSByZXN1bHQuZGF0YTsKICAgICAgICB0aGlzLnNrdS5saXN0ID0gdGhpcy5za3VMaXN0KHJlc3VsdC5kYXRhKTsKICAgICAgICBjb25zb2xlLmxvZyggdGhpcy5za3UubGlzdCwgJ09PT08nKTsKICAgICAgfQogICAgfSwKICAgIHNrdUxpc3QodHJlZSkgewogICAgICBsZXQgZ3JvdXAgPSBbXTsKICAgICAgdHJlZS5tYXAoaXRlbSA9PiB7CiAgICAgICAgbGV0IHNpbmdsZSA9IFtdOwogICAgICAgIGl0ZW0udi5tYXAobGlzdCA9PiB7CiAgICAgICAgICBzaW5nbGUucHVzaChsaXN0Lm5hbWUpOwogICAgICAgIH0pCiAgICAgICAgZ3JvdXAucHVzaChzaW5nbGUpOwogICAgICB9KQogICAgICByZXR1cm4gdGhpcy5DYXJ0ZXNpYW4oZ3JvdXApOwogICAgfSwKICAgIENhcnRlc2lhbihhcnIpIHsgLy8g5rGC56yb5Y2h5bCU5YC8CiAgICAgIGlmIChhcnIubGVuZ3RoIDwgMikgcmV0dXJuIGFyclswXSB8fCBbXTsKICAgICAgcmV0dXJuIGFyci5yZWR1Y2UoKHRvdGFsLCB2YWx1ZSkgPT4gewogICAgICAgIGxldCBpdGVtID0gW107CiAgICAgICAgdG90YWwuZm9yRWFjaChjID0+IHsKICAgICAgICAgIHZhbHVlLmZvckVhY2godiA9PiB7CiAgICAgICAgICAgIGlmIChjIGluc3RhbmNlb2YgQXJyYXkpIHsKICAgICAgICAgICAgICBpdGVtLnB1c2goWy4uLmMsIHZdKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBpdGVtLnB1c2goW2MsIHZdKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSkKICAgICAgICB9KQogICAgICAgIHJldHVybiBpdGVtOwogICAgICB9KQogICAgfSwKICAgIGdldEN1c3RvbSgpIHsKICAgICAgY29uc29sZS5sb2coJ+WSqOivouWuouacjScpCiAgICB9LAogICAgcm91dGVIb21lKCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgbmFtZTogJ0hvbWUnCiAgICAgIH0pCiAgICB9LAogICAgcHJlcGFyZUJ1eSgpIHsKICAgICAgdGhpcy5za3VEaWFsb2cgPSB0cnVlOwogICAgfSwKICAgIGdvQnV5KCkgewogICAgICBjb25zb2xlLmxvZygnZ29idXknKQogICAgfQogIH0KfQo="},{"version":3,"sources":["Detail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Detail.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"detail\">\n    <!--【banner图】-->\n    <van-swipe class=\"detail-swipe\" :autoplay=\"3000\" indicator-color=\"white\">\n      <van-swipe-item v-for=\"(item, index) in figureData\" :key=\"index\">\n        <img v-lazy=\"baseUrl + 'storage/' + item.figure\" />\n      </van-swipe-item>\n    </van-swipe>\n    <!--【商品标题和价格】-->\n    <van-cell-group>\n      <van-cell :value=\"'零售价: ¥' + informData.price\" :border=\"false\" value-class=\"detail-price\" />\n      <van-cell :value=\"informData.title\" :border=\"false\" value-class=\"detail-title\" />\n    </van-cell-group>\n    <van-cell-group class=\"detail-quality\">\n      <van-cell title=\"运费: 包邮\" />\n      <van-cell title=\"正品保障\" />\n    </van-cell-group>\n    <!--【商品详情】-->\n    <van-cell-group class=\"detail-message\">\n      <van-cell title=\"商品详情\" :border=\"false\" />\n      <template v-for=\"(item, index) in thumbData\">\n        <img :key=\"index\" v-lazy=\"baseUrl + 'storage/' + item.describe\" />\n      </template>\n      <van-divider>没有更多啦</van-divider>\n    </van-cell-group>\n    <!--【Sku】-->\n    <van-sku\n      v-model=\"skuDialog\"\n      :sku=\"sku\"\n      :goods=\"informData\"\n      :goods-id=\"informData.unique\"\n      :quota=\"0\"\n      :quota-used=\"0\"\n      :hide-stock=\"false\"\n      @buy-clicked=\"goBuy\"\n    />\n    <!--【底部固定栏】-->\n    <van-goods-action>\n      <van-goods-action-icon icon=\"chat-o\" text=\"客服\" @click=\"getCustom\" />\n      <van-goods-action-icon icon=\"shop-o\" text=\"店铺\" @click=\"routeHome\" />\n      <van-goods-action-button\n        type=\"danger\"\n        text=\"立即购买\"\n        @click=\"prepareBuy\"\n      />\n    </van-goods-action>\n  </div>\n</template>\n\n<script>\nimport Vue from 'vue';\nimport { Swipe, SwipeItem, Lazyload, Cell, CellGroup, Divider, GoodsAction, GoodsActionIcon, GoodsActionButton, Sku } from 'vant';\nVue.use(Swipe);\nVue.use(SwipeItem);\nVue.use(Lazyload);\nVue.use(Cell);\nVue.use(CellGroup);\nVue.use(Divider);\nVue.use(Sku);\nVue.use(GoodsAction);\nVue.use(GoodsActionButton);\nVue.use(GoodsActionIcon);\nimport { goodsDetail, goodsSku } from './../assets/api/detail.js'\nexport default {\n  name: 'Detail',\n  data() {\n    return {\n      baseUrl: process.env.VUE_APP_SERVICE,\n      figureData: [],\n      informData: {},\n      thumbData: [],\n      skuDialog: false,\n      sku: {\n        tree: [],\n        list: [\n          {\n            id: 2259, // skuId\n            3: 3, // 规格类目 k_s 为 s1 的对应规格值 id\n            4: 6, // 规格类目 k_s 为 s2 的对应规格值 id\n            price: 100, // 价格（单位分）\n            stock_num: 110 // 当前 sku 组合对应的库存\n          }\n        ],\n        price: '1.00', // 默认价格（单位元）\n        stock_num: 100, // 商品总库存\n        collection_id: 2261, // 无规格商品 skuId 取 collection_id，否则取所选 sku 组合对应的 id\n        none_sku: false, // 是否无规格商品\n      }\n    }\n  },\n  created() {\n    const unique = this.$route.query.unique;\n    this.detailData(unique);\n    this.detailSku(unique);\n  },\n  methods: {\n    async detailData(unique) {\n      let params = {\n        unique: unique\n      };\n      let result = await goodsDetail(params);\n      if (result.status) {\n        this.figureData = result.data.figure;\n        this.informData = result.data.inform;\n        this.thumbData = result.data.thumb;\n        // 初始化sku数据\n        this.sku.price = this.informData.price;\n      }\n    },\n    async detailSku(unique) {\n      let params = {\n        unique: unique\n      };\n      let result = await goodsSku(params);\n      if (result.status) {\n        this.sku.tree = result.data;\n        this.sku.list = this.skuList(result.data);\n        console.log( this.sku.list, 'OOOO');\n      }\n    },\n    skuList(tree) {\n      let group = [];\n      tree.map(item => {\n        let single = [];\n        item.v.map(list => {\n          single.push(list.name);\n        })\n        group.push(single);\n      })\n      return this.Cartesian(group);\n    },\n    Cartesian(arr) { // 求笛卡尔值\n      if (arr.length < 2) return arr[0] || [];\n      return arr.reduce((total, value) => {\n        let item = [];\n        total.forEach(c => {\n          value.forEach(v => {\n            if (c instanceof Array) {\n              item.push([...c, v]);\n            } else {\n              item.push([c, v]);\n            }\n          })\n        })\n        return item;\n      })\n    },\n    getCustom() {\n      console.log('咨询客服')\n    },\n    routeHome() {\n      this.$router.push({\n        name: 'Home'\n      })\n    },\n    prepareBuy() {\n      this.skuDialog = true;\n    },\n    goBuy() {\n      console.log('gobuy')\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.detail {\n  position: relative;\n  width: 100%;\n  min-height: 100vh;\n  background-color: #f5f5f5;\n  .detail-swipe {\n    width: 100%;\n    height: 375px;\n    .van-swipe-item {\n      width: 100%;\n      height: 375px;\n      > img {\n        width: 100%;\n        height: 375px;\n      }\n    }\n  }\n  .detail-price {\n    font-size: 18px;\n    color: #ee0a24;\n  }\n  .detail-title {\n    font-size: 16px;\n    color: #333333;\n  }\n  .detail-quality {\n    margin: 18px 0 0 0;\n  }\n  .detail-message {\n    margin: 18px 0 0 0;\n    padding: 0 0 50px 0;\n    > img {\n      width: 100%;\n      height: auto;\n    }\n  }\n}\n</style>"]}]}