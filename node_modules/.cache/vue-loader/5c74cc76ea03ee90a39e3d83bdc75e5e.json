{"remainingRequest":"/Users/wind/Documents/Heart/Heart/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wind/Documents/Heart/Heart/src/views/Found.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wind/Documents/Heart/Heart/src/views/Found.vue","mtime":1604453875729},{"path":"/Users/wind/Documents/Heart/Heart/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wind/Documents/Heart/Heart/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/wind/Documents/Heart/Heart/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wind/Documents/Heart/Heart/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IHsgQWRkcmVzc0VkaXQsIFRvYXN0ICB9IGZyb20gJ3ZhbnQnOwpWdWUudXNlKEFkZHJlc3NFZGl0KTsKVnVlLnVzZShUb2FzdCk7CmltcG9ydCBhcmVhTGlzdCBmcm9tICcuLy4uL2Fzc2V0cy9qcy9hcmVhLmpzJzsKaW1wb3J0IHsgYWRkQWRkcmVzcywgZWRpdEFkZHJlc3MsIGRlbEFkZHJlc3MgfSBmcm9tICcuLy4uL2Fzc2V0cy9hcGkvZm91bmQuanMnCmltcG9ydCB7IGdldEl0ZW0gfSBmcm9tICcuLy4uL2Fzc2V0cy9qcy9hcHB1dGlscy5qcycKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdGb3VuZCcsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGFkZHJlc3NJZDogLTEsCiAgICAgIGFyZWFMaXN0OiBhcmVhTGlzdCwKICAgICAgYWRkcmVzc0luZm86IHt9CiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5hZGRyZXNzSWQgPSB0aGlzLiRyb3V0ZS5xdWVyeS5pZCB8fCAtMTsKICAgIGlmICh0aGlzLmFkZHJlc3NJZCAhPSAtMSkgewogICAgICAvLyDliJ3lp4vljJbnvJbovpHmlbDmja4KICAgICAgbGV0IGFkZHJlc3NMaXN0ID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRBZGRyZXNzTGlzdDsKICAgICAgbGV0IGFkZHJlc3NEYXRhID0gYWRkcmVzc0xpc3QuZmlsdGVyKGl0ZW0gPT4gaXRlbS5pZCA9PSB0aGlzLmFkZHJlc3NJZCk7CiAgICAgIGFkZHJlc3NEYXRhWzBdLmFkZHJlc3NEZXRhaWwgPSBhZGRyZXNzRGF0YVswXS5yb2FkOwogICAgICB0aGlzLmFkZHJlc3NJbmZvID0gYWRkcmVzc0RhdGFbMF07CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBhc3luYyBvblNhdmUodmFsKSB7CiAgICAgIGlmICh0aGlzLmFkZHJlc3NJZCAhPSAtMSkgeyAvLyDnvJbovpEKICAgICAgICBsZXQgcGFyYW1zID0gewogICAgICAgICAgb3BlbmlkOiBnZXRJdGVtKCd1c2VySW5mbycpLm9wZW5pZCwKICAgICAgICAgIGlkOiB0aGlzLmFkZHJlc3NJZCwKICAgICAgICAgIG5hbWU6IHZhbC5uYW1lLAogICAgICAgICAgcGhvbmU6IHZhbC50ZWwsCiAgICAgICAgICBwcm92aW5jZTogdmFsLnByb3ZpbmNlLAogICAgICAgICAgY2l0eTogdmFsLmNpdHksCiAgICAgICAgICBjb3VudHk6IHZhbC5jb3VudHksCiAgICAgICAgICByb2FkOiB2YWwuYWRkcmVzc0RldGFpbAogICAgICAgIH07CiAgICAgICAgbGV0IHJlc3VsdCA9IGF3YWl0IGVkaXRBZGRyZXNzKHBhcmFtcyk7CiAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMpIHsKICAgICAgICAgIHRoaXMuJHJvdXRlci5nbygtMSk7CiAgICAgICAgICBUb2FzdC5zdWNjZXNzKHJlc3VsdC5tZXNzYWdlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgVG9hc3QuZmFpbChyZXN1bHQubWVzc2FnZSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgeyAvLyDmlrDlop7lnLDlnYAKICAgICAgICBsZXQgcGFyYW1zID0gewogICAgICAgICAgb3BlbmlkOiBnZXRJdGVtKCd1c2VySW5mbycpLm9wZW5pZCwKICAgICAgICAgIG5hbWU6IHZhbC5uYW1lLAogICAgICAgICAgcGhvbmU6IHZhbC50ZWwsCiAgICAgICAgICBwcm92aW5jZTogdmFsLnByb3ZpbmNlLAogICAgICAgICAgY2l0eTogdmFsLmNpdHksCiAgICAgICAgICBjb3VudHk6IHZhbC5jb3VudHksCiAgICAgICAgICByb2FkOiB2YWwuYWRkcmVzc0RldGFpbAogICAgICAgIH07CiAgICAgICAgbGV0IHJlc3VsdCA9IGF3YWl0IGFkZEFkZHJlc3MocGFyYW1zKTsKICAgICAgICBpZiAocmVzdWx0LnN0YXR1cykgewogICAgICAgICAgdGhpcy4kcm91dGVyLmdvKC0xKTsKICAgICAgICAgIFRvYXN0LnN1Y2Nlc3MocmVzdWx0Lm1lc3NhZ2UpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBUb2FzdC5mYWlsKHJlc3VsdC5tZXNzYWdlKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBhc3luYyBvbkRlbGV0ZSgpIHsKICAgICAgaWYgKHRoaXMuYWRkcmVzc0lkICE9IC0xKSB7CiAgICAgICAgbGV0IHBhcmFtcyA9IHsKICAgICAgICAgIG9wZW5pZDogZ2V0SXRlbSgndXNlckluZm8nKS5vcGVuaWQsCiAgICAgICAgICBpZDogdGhpcy5hZGRyZXNzSWQsCiAgICAgICAgfTsKICAgICAgICBsZXQgcmVzdWx0ID0gYXdhaXQgZGVsQWRkcmVzcyhwYXJhbXMpOwogICAgICAgIGlmIChyZXN1bHQuc3RhdHVzKSB7CiAgICAgICAgICB0aGlzLiRyb3V0ZXIuZ28oLTEpOwogICAgICAgICAgVG9hc3Quc3VjY2VzcyhyZXN1bHQubWVzc2FnZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIFRvYXN0LmZhaWwocmVzdWx0Lm1lc3NhZ2UpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICB9Cn0K"},{"version":3,"sources":["Found.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;AAeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Found.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div class=\"found\">\n      <van-address-edit\n        :area-list=\"areaList\"\n        :show-postal=\"false\"\n        :address-info=\"addressInfo\"\n        :show-delete=\"addressId != -1\"\n        :area-columns-placeholder=\"['请选择', '请选择', '请选择']\"\n        @save=\"onSave\"\n        @delete=\"onDelete\"\n      />\n    </div>\n</template>\n\n<script>\nimport Vue from 'vue';\nimport { AddressEdit, Toast  } from 'vant';\nVue.use(AddressEdit);\nVue.use(Toast);\nimport areaList from './../assets/js/area.js';\nimport { addAddress, editAddress, delAddress } from './../assets/api/found.js'\nimport { getItem } from './../assets/js/apputils.js'\nexport default {\n  name: 'Found',\n  data() {\n    return {\n      addressId: -1,\n      areaList: areaList,\n      addressInfo: {}\n    }\n  },\n  created() {\n    this.addressId = this.$route.query.id || -1;\n    if (this.addressId != -1) {\n      // 初始化编辑数据\n      let addressList = this.$store.getters.getAddressList;\n      let addressData = addressList.filter(item => item.id == this.addressId);\n      addressData[0].addressDetail = addressData[0].road;\n      this.addressInfo = addressData[0];\n    }\n  },\n  methods: {\n    async onSave(val) {\n      if (this.addressId != -1) { // 编辑\n        let params = {\n          openid: getItem('userInfo').openid,\n          id: this.addressId,\n          name: val.name,\n          phone: val.tel,\n          province: val.province,\n          city: val.city,\n          county: val.county,\n          road: val.addressDetail\n        };\n        let result = await editAddress(params);\n        if (result.status) {\n          this.$router.go(-1);\n          Toast.success(result.message);\n        } else {\n          Toast.fail(result.message);\n        }\n      } else { // 新增地址\n        let params = {\n          openid: getItem('userInfo').openid,\n          name: val.name,\n          phone: val.tel,\n          province: val.province,\n          city: val.city,\n          county: val.county,\n          road: val.addressDetail\n        };\n        let result = await addAddress(params);\n        if (result.status) {\n          this.$router.go(-1);\n          Toast.success(result.message);\n        } else {\n          Toast.fail(result.message);\n        }\n      }\n    },\n    async onDelete() {\n      if (this.addressId != -1) {\n        let params = {\n          openid: getItem('userInfo').openid,\n          id: this.addressId,\n        };\n        let result = await delAddress(params);\n        if (result.status) {\n          this.$router.go(-1);\n          Toast.success(result.message);\n        } else {\n          Toast.fail(result.message);\n        }\n      }\n    },\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.found {\n  position: relative;\n  width: 100%;\n  min-height: 100vh;\n  background-color: #f5f5f5;\n}\n</style>"]}]}