{"remainingRequest":"/Users/wind/Documents/Heart/Heart/node_modules/babel-loader/lib/index.js!/Users/wind/Documents/Heart/Heart/node_modules/eslint-loader/index.js??ref--13-0!/Users/wind/Documents/Heart/Heart/src/assets/js/author.js","dependencies":[{"path":"/Users/wind/Documents/Heart/Heart/src/assets/js/author.js","mtime":1604285315428},{"path":"/Users/wind/Documents/Heart/Heart/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wind/Documents/Heart/Heart/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/wind/Documents/Heart/Heart/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCB7IHVybFBhcmFtLCBheGlvc0ZldGNoLCBzZXRJdGVtLCBnZXRJdGVtIH0gZnJvbSAnLi9hcHB1dGlscy5qcyc7CmV4cG9ydCBmdW5jdGlvbiB1c2VySW5mbygpIHsKICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJldCwgcmVqKSB7CiAgICBpZiAoZ2V0SXRlbSgndXNlckluZm8nKSkgewogICAgICByZXQoKTsKICAgIH0gZWxzZSB7CiAgICAgIHZhciBjb2RlID0gdXJsUGFyYW0oJ2NvZGUnKTsgLy8gY29uc3QgbG9jYWwgPSB3aW5kb3cubG9jYXRpb24uaHJlZjsKCiAgICAgIHZhciBsb2NhbCA9ICdodHRwczovL21kcXlnbC5jbi9pbmRleC9oZWxsbyc7CgogICAgICBpZiAoY29kZSA9PSBudWxsIHx8IGNvZGUgPT0gJycpIHsKICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICdodHRwczovL29wZW4ud2VpeGluLnFxLmNvbS9jb25uZWN0L29hdXRoMi9hdXRob3JpemU/YXBwaWQ9JyArIHByb2Nlc3MuZW52LlZVRV9BUFBfQVBQSUQgKyAnJnJlZGlyZWN0X3VyaT0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGxvY2FsKSArICcmcmVzcG9uc2VfdHlwZT1jb2RlJnNjb3BlPXNuc2FwaV91c2VyaW5mbyZzdGF0ZT0xI3dlY2hhdF9yZWRpcmVjdCc7CiAgICAgICAgcmVqKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYXhpb3NGZXRjaCh7CiAgICAgICAgICBtZXRob2Q6ICJQT1NUIiwKICAgICAgICAgIHVybDogImFwaS90b2tlbi9pbmZvcm0iLAogICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgIGNvZGU6IGNvZGUKICAgICAgICAgIH0KICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIGlmIChyZXMuc3RhdHVzKSB7CiAgICAgICAgICAgIHNldEl0ZW0oJ3VzZXJJbmZvJywgcmVzLmRhdGEpOwogICAgICAgICAgICByZXQoKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfmnKrnn6XplJnor6/vvZ4nKTsKICAgICAgICAgIH0KICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSk7Cn0="},{"version":3,"sources":["/Users/wind/Documents/Heart/Heart/src/assets/js/author.js"],"names":["urlParam","axiosFetch","setItem","getItem","userInfo","Promise","ret","rej","code","local","window","location","href","process","env","VUE_APP_APPID","encodeURIComponent","method","url","params","then","res","status","data","console","log","catch","err"],"mappings":";AAAA,SAASA,QAAT,EAAmBC,UAAnB,EAA+BC,OAA/B,EAAwCC,OAAxC,QAAuD,eAAvD;AACA,OAAO,SAASC,QAAT,GAAoB;AACzB,SAAO,IAAIC,OAAJ,CAAY,UAACC,GAAD,EAAMC,GAAN,EAAc;AAC/B,QAAIJ,OAAO,CAAC,UAAD,CAAX,EAAyB;AACvBG,MAAAA,GAAG;AACJ,KAFD,MAEO;AACL,UAAME,IAAI,GAAGR,QAAQ,CAAC,MAAD,CAArB,CADK,CAEL;;AACA,UAAMS,KAAK,GAAG,+BAAd;;AACA,UAAID,IAAI,IAAI,IAAR,IAAgBA,IAAI,IAAI,EAA5B,EAAgC;AAC9BE,QAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,+DAA+DC,OAAO,CAACC,GAAR,CAAYC,aAA3E,GAA2F,gBAA3F,GAA8GC,kBAAkB,CAACP,KAAD,CAAhI,GAA0I,mEAAjK;AACAF,QAAAA,GAAG;AACJ,OAHD,MAGO;AACLN,QAAAA,UAAU,CAAC;AACTgB,UAAAA,MAAM,EAAE,MADC;AAETC,UAAAA,GAAG,EAAE,kBAFI;AAGTC,UAAAA,MAAM,EAAE;AACNX,YAAAA,IAAI,EAAEA;AADA;AAHC,SAAD,CAAV,CAMGY,IANH,CAMQ,UAACC,GAAD,EAAS;AACf,cAAIA,GAAG,CAACC,MAAR,EAAgB;AACdpB,YAAAA,OAAO,CAAC,UAAD,EAAamB,GAAG,CAACE,IAAjB,CAAP;AACAjB,YAAAA,GAAG;AACJ,WAHD,MAGO;AACLkB,YAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACD;AACF,SAbD,EAaGC,KAbH,CAaS,UAACC,GAAD,EAAS;AAChBH,UAAAA,OAAO,CAACC,GAAR,CAAYE,GAAZ;AACD,SAfD;AAgBD;AACF;AACF,GA7BM,CAAP;AA8BD","sourcesContent":["import { urlParam, axiosFetch, setItem, getItem } from './apputils.js'\nexport function userInfo() {\n  return new Promise((ret, rej) => {\n    if (getItem('userInfo')) {\n      ret();\n    } else {\n      const code = urlParam('code');\n      // const local = window.location.href;\n      const local = 'https://mdqygl.cn/index/hello';\n      if (code == null || code == '') {\n        window.location.href = 'https://open.weixin.qq.com/connect/oauth2/authorize?appid=' + process.env.VUE_APP_APPID + '&redirect_uri=' + encodeURIComponent(local) + '&response_type=code&scope=snsapi_userinfo&state=1#wechat_redirect';\n        rej();\n      } else {\n        axiosFetch({\n          method: \"POST\",\n          url: \"api/token/inform\",\n          params: {\n            code: code,\n          }\n        }).then((res) => {\n          if (res.status) {\n            setItem('userInfo', res.data);\n            ret();\n          } else {\n            console.log('未知错误～');\n          }\n        }).catch((err) => {\n          console.log(err);\n        })\n      }\n    }\n  })\n}"]}]}